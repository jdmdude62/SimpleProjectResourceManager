<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx/17" 
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.subliminalsearch.simpleprojectresourcemanager.controller.ExecutiveDashboardController"
            prefHeight="800.0" prefWidth="1200.0">
    
    <top>
        <VBox>
            <MenuBar>
                <Menu text="File">
                    <MenuItem text="Export to PDF" onAction="#exportToPDF"/>
                    <MenuItem text="Print Dashboard" onAction="#printDashboard"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="Close" onAction="#closeDashboard"/>
                </Menu>
                <Menu text="View">
                    <MenuItem text="Refresh" onAction="#refreshDashboard" accelerator="F5"/>
                    <CheckMenuItem text="Auto-refresh" fx:id="autoRefreshMenuItem"/>
                    <SeparatorMenuItem/>
                    <fx:define>
                        <ToggleGroup fx:id="viewToggleGroup"/>
                    </fx:define>
                    <RadioMenuItem text="Monthly View" fx:id="monthlyViewItem" selected="true" toggleGroup="$viewToggleGroup"/>
                    <RadioMenuItem text="Quarterly View" fx:id="quarterlyViewItem" toggleGroup="$viewToggleGroup"/>
                    <RadioMenuItem text="Annual View" fx:id="annualViewItem" toggleGroup="$viewToggleGroup"/>
                </Menu>
                <Menu text="Settings">
                    <MenuItem text="Dashboard Settings..." onAction="#openSettings"/>
                    <MenuItem text="Financial Parameters..." onAction="#openFinancialSettings"/>
                    <MenuItem text="Alert Thresholds..." onAction="#openAlertSettings"/>
                    <SeparatorMenuItem/>
                    <MenuItem text="Save Current Layout" onAction="#saveLayout"/>
                    <MenuItem text="Reset to Defaults" onAction="#resetDefaults"/>
                </Menu>
                <Menu text="Reports">
                    <MenuItem text="Resource Utilization" onAction="#showResourceReport"/>
                    <MenuItem text="Project Pipeline" onAction="#showPipelineReport"/>
                    <MenuItem text="Financial Summary" onAction="#showFinancialReport"/>
                    <MenuItem text="Geographic Analysis" onAction="#showGeographicReport"/>
                </Menu>
            </MenuBar>
            
            <ToolBar>
                <Label text="Date Range:"/>
                <ComboBox fx:id="dateRangeCombo" prefWidth="150"/>
                <Separator orientation="VERTICAL"/>
                <Label text="Project Type:"/>
                <ComboBox fx:id="projectTypeCombo" prefWidth="120"/>
                <Separator orientation="VERTICAL"/>
                <Button text="Refresh" onAction="#refreshDashboard"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="lastUpdateLabel" text="Last updated: --:--"/>
            </ToolBar>
        </VBox>
    </top>
    
    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true">
            <VBox spacing="20">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>
                
                <!-- KPI Cards Row -->
                <HBox spacing="15" alignment="CENTER">
                    <VBox alignment="CENTER" prefWidth="200" prefHeight="100" style="-fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-padding: 10; -fx-background-color: white;">
                        <Label text="Active Projects" style="-fx-font-size: 12px; -fx-text-fill: #666;"/>
                        <Label fx:id="activeProjectsLabel" text="--" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
                        <Label fx:id="projectsTrendLabel" text="+0%" style="-fx-font-size: 11px; -fx-text-fill: #4CAF50;"/>
                    </VBox>
                    
                    <VBox alignment="CENTER" prefWidth="200" prefHeight="100" style="-fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-padding: 10; -fx-background-color: white;">
                        <Label text="Resource Utilization" style="-fx-font-size: 12px; -fx-text-fill: #666;"/>
                        <Label fx:id="utilizationLabel" text="--%" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
                        <ProgressBar fx:id="utilizationBar" prefWidth="150"/>
                    </VBox>
                    
                    <VBox alignment="CENTER" prefWidth="200" prefHeight="100" style="-fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-padding: 10; -fx-background-color: white;">
                        <Label text="On-Time Delivery" style="-fx-font-size: 12px; -fx-text-fill: #666;"/>
                        <Label fx:id="onTimeLabel" text="--%" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
                        <Label fx:id="onTimeTrendLabel" text="0%" style="-fx-font-size: 11px; -fx-text-fill: #FFC107;"/>
                    </VBox>
                    
                    <VBox alignment="CENTER" prefWidth="200" prefHeight="100" style="-fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-padding: 10; -fx-background-color: white;">
                        <Label text="Monthly Revenue" style="-fx-font-size: 12px; -fx-text-fill: #666;"/>
                        <Label fx:id="revenueLabel" text="--" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
                        <Label fx:id="revenueTrendLabel" text="+0%" style="-fx-font-size: 11px; -fx-text-fill: #4CAF50;"/>
                    </VBox>
                    
                    <VBox alignment="CENTER" prefWidth="200" prefHeight="100" style="-fx-border-color: #e0e0e0; -fx-border-width: 1; -fx-padding: 10; -fx-background-color: white;">
                        <Label text="Completion Rate" style="-fx-font-size: 12px; -fx-text-fill: #666;"/>
                        <Label fx:id="completionLabel" text="--%" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
                        <PieChart fx:id="completionPie" prefHeight="60" prefWidth="60" legendVisible="false"/>
                    </VBox>
                </HBox>
                
                <!-- Charts Row 1 -->
                <HBox spacing="20">
                    <VBox spacing="10" HBox.hgrow="ALWAYS">
                        <Label text="Project Volume Trend" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                        <LineChart fx:id="volumeTrendChart" prefHeight="250" animated="false">
                            <xAxis>
                                <CategoryAxis label="Month"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis label="Projects"/>
                            </yAxis>
                        </LineChart>
                    </VBox>
                    
                    <VBox spacing="10" HBox.hgrow="ALWAYS">
                        <Label text="Project Type Distribution" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                        <PieChart fx:id="projectTypeChart" prefHeight="250"/>
                    </VBox>
                </HBox>
                
                <!-- Charts Row 2 -->
                <HBox spacing="20">
                    <VBox spacing="10" HBox.hgrow="ALWAYS">
                        <Label text="Resource Allocation" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                        <BarChart fx:id="resourceChart" prefHeight="250" animated="false">
                            <xAxis>
                                <CategoryAxis label="Resource"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis label="Hours"/>
                            </yAxis>
                        </BarChart>
                    </VBox>
                    
                    <VBox spacing="10" HBox.hgrow="ALWAYS">
                        <Label text="Geographic Distribution" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                        <StackedBarChart fx:id="geoChart" prefHeight="250" animated="false">
                            <xAxis>
                                <CategoryAxis label="State"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis label="Projects"/>
                            </yAxis>
                        </StackedBarChart>
                    </VBox>
                </HBox>
                
                <!-- Alerts Section -->
                <VBox spacing="10">
                    <Label text="Alerts and Notifications" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                    <ListView fx:id="alertsList" prefHeight="100"/>
                </VBox>
                
            </VBox>
        </ScrollPane>
    </center>
    
    <bottom>
        <HBox spacing="10" style="-fx-background-color: #f0f0f0;">
            <padding>
                <Insets top="5" right="5" bottom="5" left="5"/>
            </padding>
            <Label fx:id="statusLabel" text="Ready"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="projectCountLabel" text="Projects: 0"/>
            <Separator orientation="VERTICAL"/>
            <Label fx:id="resourceCountLabel" text="Resources: 0"/>
            <Separator orientation="VERTICAL"/>
            <Label fx:id="refreshIntervalLabel" text="Auto-refresh: OFF"/>
        </HBox>
    </bottom>
    
</BorderPane>