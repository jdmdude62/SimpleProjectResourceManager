<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane fx:id="mainBorderPane" xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1">
   <top>
      <VBox>
         <!-- Menu Bar -->
         <MenuBar fx:id="menuBar">
            <Menu text="File">
               <Menu text="New">
                  <MenuItem fx:id="menuNewProject" text="Project..." />
                  <MenuItem fx:id="menuNewResource" text="Resource..." />
                  <MenuItem fx:id="menuNewAssignment" text="Assignment..." />
                  <MenuItem fx:id="menuMultiAssignment" text="Multi-Resource Assignment..." />
               </Menu>
               <SeparatorMenuItem />
               <MenuItem fx:id="menuExit" text="Exit" onAction="#handleExit" />
            </Menu>
            <Menu text="View">
               <Menu text="Timeline">
                  <RadioMenuItem fx:id="menuMonthView" text="Month View" selected="true" />
                  <RadioMenuItem fx:id="menuWeekView" text="Week View" />
                  <RadioMenuItem fx:id="menuDayView" text="Day View" />
               </Menu>
               <SeparatorMenuItem />
               <CheckMenuItem fx:id="menuShowAllResources" text="Show All Resources" selected="false" />
               <SeparatorMenuItem />
               <Menu text="Dashboards">
                  <MenuItem fx:id="menuExecutiveDashboard" text="Executive Dashboard" onAction="#openExecutiveDashboard" />
                  <MenuItem fx:id="menuResourceAvailabilityView" text="Resource Availability" />
                  <MenuItem fx:id="menuHolidayCalendarView" text="Holiday Calendar" />
               </Menu>
               <SeparatorMenuItem />
               <MenuItem fx:id="menuRefresh" text="Refresh" />
            </Menu>
            <Menu text="Resources">
               <MenuItem fx:id="menuCertificationManagement" text="Manage Certifications..." />
               <MenuItem fx:id="menuSkillsManagement" text="Manage Skills..." />
               <MenuItem fx:id="menuSkillCategoryManagement" text="Manage Skill Categories..." />
               <SeparatorMenuItem />
               <MenuItem fx:id="menuResourceQualifications" text="Resource Qualifications..." />
               <SeparatorMenuItem />
               <MenuItem fx:id="menuResourceGrid" text="Resource Grid Editor..." />
            </Menu>
            <Menu text="Projects">
               <MenuItem fx:id="menuEditProject" text="Edit Project..." onAction="#openEditProjectDialog" />
               <SeparatorMenuItem />
               <MenuItem fx:id="menuProjectGrid" text="Project Grid Editor..." />
               <MenuItem fx:id="menuProjectTasks" text="Project Tasks..." />
               <MenuItem fx:id="menuFinancialTracking" text="Financial Tracking..." onAction="#openFinancialTracking" />
               <MenuItem fx:id="menuFinancialTimeline" text="Financial Timeline..." onAction="#openFinancialTimeline" />
               <MenuItem fx:id="menuPOImport" text="Import Company POs..." onAction="#openPOImport" />
               <SeparatorMenuItem />
               <MenuItem fx:id="menuImportExcel" text="Import Tech Schedules from Excel..." />
               <MenuItem fx:id="menuBatchDeleteProjects" text="Batch Delete Projects..." />
               <SeparatorMenuItem />
               <MenuItem fx:id="menuProjectManagers" text="Project Managers..." />
            </Menu>
            <Menu text="Reports">
               <MenuItem fx:id="menuReportCenter" text="Report Center..." />
               <SeparatorMenuItem />
               <Menu text="Quick Reports">
                  <MenuItem fx:id="menuQuickRevenueBudget" text="Revenue/Budget Report" onAction="#openQuickRevenueBudget" />
                  <MenuItem fx:id="menuQuickResourceUtil" text="Resource Utilization" onAction="#openQuickResourceUtil" />
                  <MenuItem fx:id="menuQuickProjectStatus" text="Project Status" onAction="#openQuickProjectStatus" />
                  <MenuItem fx:id="menuQuickWorkload" text="Workload Analysis" onAction="#openQuickWorkload" />
               </Menu>
            </Menu>
            <Menu text="Tools">
               <MenuItem fx:id="menuEmailSettings" text="Email Settings..." />
               <MenuItem fx:id="menuUtilizationSettings" text="Utilization Settings..." onAction="#openUtilizationSettings" />
               <SeparatorMenuItem />
               <MenuItem fx:id="menuDomainLogins" text="Configure Domain Logins..." onAction="#configureDomainLogins" />
               <MenuItem fx:id="menuSharePointSettings" text="SharePoint Integration..." onAction="#configureSharePoint" />
               <SeparatorMenuItem />
               <MenuItem fx:id="menuSyncNow" text="SharePoint Sync Now" onAction="#syncSharePointNow" />
               <MenuItem fx:id="menuViewSyncLog" text="View SharePoint Sync Log" onAction="#viewSyncLog" />
            </Menu>
            <Menu text="Help">
               <MenuItem fx:id="menuUserGuide" text="User Guide" onAction="#openUserGuide" />
               <MenuItem fx:id="menuKeyboardShortcuts" text="Keyboard Shortcuts" onAction="#openKeyboardShortcuts" />
               <SeparatorMenuItem />
               <MenuItem fx:id="menuAbout" text="About" onAction="#openAbout" />
            </Menu>
            <Menu text="SYNC TEST">
               <MenuItem text="Test SharePoint Sync NOW" onAction="#syncSharePointNow" />
            </Menu>
         </MenuBar>
         
         <!-- Tool Bar -->
         <ToolBar fx:id="toolBar" prefHeight="50" minHeight="50">
            <!-- Navigation Controls -->
            <Button fx:id="btnPrevMonth" text="◀◀◀">
               <tooltip><Tooltip text="Previous Month" /></tooltip>
            </Button>
            <Button fx:id="btnPrevWeek" text="◀◀">
               <tooltip><Tooltip text="Previous Week" /></tooltip>
            </Button>
            <Button fx:id="btnPrevDay" text="◀">
               <tooltip><Tooltip text="Previous Day" /></tooltip>
            </Button>
            <Separator orientation="VERTICAL" />
            <Button fx:id="btnToday" text="Today" prefWidth="70" minWidth="70" prefHeight="36" minHeight="36">
               <tooltip><Tooltip text="Go to Today" /></tooltip>
            </Button>
            <Separator orientation="VERTICAL" />
            <Button fx:id="btnNextDay" text="▶">
               <tooltip><Tooltip text="Next Day" /></tooltip>
            </Button>
            <Button fx:id="btnNextWeek" text="▶▶">
               <tooltip><Tooltip text="Next Week" /></tooltip>
            </Button>
            <Button fx:id="btnNextMonth" text="▶▶▶">
               <tooltip><Tooltip text="Next Month" /></tooltip>
            </Button>
            <Separator orientation="VERTICAL" />
            
            <!-- View Controls -->
            <Label text="View:" />
            <ComboBox fx:id="viewModeCombo" prefWidth="100.0" />
            <Label text="Date:" />
            <DatePicker fx:id="currentDatePicker" prefWidth="140.0" />
            <Separator orientation="VERTICAL" />
            
            <!-- Zoom Controls -->
            <Label text="Zoom:" />
            <ComboBox fx:id="zoomCombo" prefWidth="90.0" />
            <Separator orientation="VERTICAL" />
            
            <!-- Action Buttons -->
            <Button fx:id="btnNewProject" text="+ Project" styleClass="btn-success" prefWidth="120" minWidth="120" prefHeight="36" minHeight="36" />
            <Button fx:id="btnEditProject" text="Edit Project" styleClass="btn-warning" prefWidth="120" minWidth="120" prefHeight="36" minHeight="36" onAction="#openEditProjectDialog">
               <tooltip><Tooltip text="Edit selected project" /></tooltip>
            </Button>
            <Button fx:id="btnNewResource" text="+ Resource" styleClass="btn-info" prefWidth="130" minWidth="130" prefHeight="36" minHeight="36" />
            <Button fx:id="btnNewAssignment" text="+ Assignment" styleClass="btn-primary" prefWidth="140" minWidth="140" prefHeight="36" minHeight="36" />
            <Button fx:id="btnAutoAssignShop" text="Auto-Assign SHOP" styleClass="btn-warning" prefWidth="150" minWidth="150" prefHeight="36" minHeight="36">
               <tooltip><Tooltip text="Automatically assign resources to SHOP for unscheduled weekdays" /></tooltip>
            </Button>
            <Separator orientation="VERTICAL" />
            <Button fx:id="btnExecutiveView" text="Executive Review" styleClass="btn-executive" prefWidth="200" prefHeight="32" onAction="#handleExecutiveView" />
            <Separator orientation="VERTICAL" />
            <Button fx:id="btnSharePointSync" text="SharePoint Sync" styleClass="btn-sync" prefWidth="150" prefHeight="32" />
         </ToolBar>
      </VBox>
   </top>
   
   <left>
      <!-- Filter Panel -->
      <VBox fx:id="filterPanel" prefWidth="200.0" spacing="10.0" styleClass="filter-panel">
         <padding>
            <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
         </padding>
         
         <Label text="Filters" styleClass="h4" />
         
         <VBox spacing="5.0">
            <Label text="Project Manager:" />
            <ComboBox fx:id="projectManagerFilter" prefWidth="180.0" promptText="All Managers" />
         </VBox>
         
         <VBox spacing="5.0">
            <Label text="Project:" />
            <ComboBox fx:id="projectFilter" prefWidth="180.0" />
         </VBox>
         
         <VBox spacing="5.0">
            <Label text="Resource:" />
            <ComboBox fx:id="resourceFilter" prefWidth="180.0" />
         </VBox>
         
         <VBox spacing="5.0">
            <Label text="Status:" />
            <ComboBox fx:id="statusFilter" prefWidth="180.0" />
         </VBox>
         
         <Button fx:id="btnClearFilters" text="Clear Filters" prefWidth="180.0" />
         
         <Separator />
         
         <VBox spacing="5.0">
            <Label text="Display Options:" styleClass="h6" />
            <CheckBox fx:id="showUnavailabilityCheckBox" text="Show Unavailability" selected="true" />
            <Label text="When enabled:" styleClass="text-muted" wrapText="true" prefWidth="170.0" style="-fx-font-size: 10;" />
            <Label text="• Shop/Training hidden during PTO" styleClass="text-muted" wrapText="true" prefWidth="170.0" style="-fx-font-size: 10;" />
            <Label text="• Project conflicts highlighted" styleClass="text-muted" wrapText="true" prefWidth="170.0" style="-fx-font-size: 10;" />
         </VBox>
      </VBox>
   </left>
   
   <center>
      <!-- Timeline Container -->
      <BorderPane fx:id="timelineContainer" styleClass="timeline-container">
         <!-- Timeline component will be injected here by the controller -->
      </BorderPane>
   </center>
   
   <bottom>
      <!-- Status Bar -->
      <HBox styleClass="status-bar" alignment="CENTER_LEFT" spacing="10.0">
         <padding>
            <Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
         </padding>
         <Label fx:id="statusLabel" text="Ready" />
         <Pane HBox.hgrow="ALWAYS" />
         <Label text="Simple Project Resource Manager v1.0" styleClass="text-muted" />
      </HBox>
   </bottom>
</BorderPane>